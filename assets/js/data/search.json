[ { "title": "UGREEN CM578 enclosure and WD SN770M incompatibility", "url": "/posts/nvme-enclosure-compat/", "categories": "", "tags": "", "date": "2025-06-29 00:00:00 +0300", "snippet": "UGREEN CM578 enclosure and WD SN770M incompatibilityI was helping a friend set up a WD BLACK SSD (SN770M 2TB, 2230) with a Steam Deck. We put it into a UGREEN enclosure to clone the original driveo...", "content": "UGREEN CM578 enclosure and WD SN770M incompatibilityI was helping a friend set up a WD BLACK SSD (SN770M 2TB, 2230) with a Steam Deck. We put it into a UGREEN enclosure to clone the original driveonto the new drive. However, the enclosure didn’t recognize the drive - the enclosure wouldn’t show up as a USB device for about 10-20 seconds, and then,it’d enumerate as a 0-byte storage device.This was weird - the drive was newly purchased, it was quite unlikely it’d be broken. However, it didn’t work in (identical, same UGREEN) enclosures.As a hail mary, we put it into the Steam Deck - and the drive showed up properly in BIOS settings overview.Mind you - the Steam Deck booted into a black screen, seemingly, because the drive was empty; we had to press some buttons to have itboot into BIOS UI to see the drive show up.Enclosure lsusb:0bda:9210 Realtek Semiconductor Corp. RTL9210 M.2 NVME AdapterEnclosure name: UGREEN NVMe M.2 USB 3.2 SSD Enclosure Adapter with Cooling Pad ; model number seems to be CM578So, tl;dr if this NVMe enclosure (or some other enclosure based on similar chip) doesn’t work for you, fret not -it might be that it’s just not up to date enough to support your NVMe drive.If you think that this is bad advice, contact me somehow and let me know. Cheers!" }, { "title": "Logitech M185 pairs to Unifying receiver", "url": "/posts/m185_unifying/", "categories": "", "tags": "", "date": "2024-06-16 00:00:00 +0300", "snippet": "Logitech M185 pairs to Unifying receiverThat’s it, that’s the post. If you’re on Linux, here’sa pairing tool, it’s worked wonderfully for me.If you think that this is bad advice, contact me somehow...", "content": "Logitech M185 pairs to Unifying receiverThat’s it, that’s the post. If you’re on Linux, here’sa pairing tool, it’s worked wonderfully for me.If you think that this is bad advice, contact me somehow and let me know. Cheers!" }, { "title": "Got mmtool from bittention? It's malware", "url": "/posts/bittention_malware/", "categories": "", "tags": "", "date": "2024-06-16 00:00:00 +0300", "snippet": "Got mmtool from bittention? It’s malwarethere’s a website called bittention and a friend is calling to my attention tthat they found malware on it.they downloaded a binary called mmtool from it, on...", "content": "Got mmtool from bittention? It’s malwarethere’s a website called bittention and a friend is calling to my attention tthat they found malware on it.they downloaded a binary called mmtool from it, only to find that it was infected with all sorts of only recently discovered malwares and virii and troyans and whatnot.they computer has been burning for seven hours straight please send helpget your clean mmtool from herealso mmtool will not ask for UAC lmao" }, { "title": "KiKit discontinuous outline unobvious stuff", "url": "/posts/kikit-discont-outline/", "categories": "", "tags": "", "date": "2024-06-13 00:00:00 +0300", "snippet": "KiKit discontinuous outline unobvious stuffWorking with KiKit? It’s great, and this problem ain’t its fault, I’d hope.If your board has a footprint with origin far outside of the board area, KiKit ...", "content": "KiKit discontinuous outline unobvious stuffWorking with KiKit? It’s great, and this problem ain’t its fault, I’d hope.If your board has a footprint with origin far outside of the board area, KiKit will not pick it up.In turn, if this footprint constitutes part of your outline, that’s going to generate a “discontinuous outline” problem,and KiKit will stall before even starting to generate anything, leaving you with an empty page and no hints.Solution? In the Source tab, set tolerance to a higher value than 1mm.{ \"source\": { \"tolerance\": \"10mm\" }}Of course, there’s a few ways that a discontinuous outline bug might happen.Read through these issues to learn more.If you think that this is bad advice, contact me somehow and let me know. Cheers!" }, { "title": "DPCD viewing on Linux", "url": "/posts/dpcd_viewing/", "categories": "", "tags": "", "date": "2024-06-13 00:00:00 +0300", "snippet": "DPCD viewing on LinuxYou can read DPCD registers from Linux like this:sudo xxd /dev/drm_dp_aux0 |head -n128|grep -v \"0000 0000 0000 0000 0000 0000 0000 0000\"of course, substitute the number as need...", "content": "DPCD viewing on LinuxYou can read DPCD registers from Linux like this:sudo xxd /dev/drm_dp_aux0 |head -n128|grep -v \"0000 0000 0000 0000 0000 0000 0000 0000\"of course, substitute the number as needed.Does this give you an Input/output error, like on a Framework laptop’s display? Try this then,this example reads the 0x100 register to see the DP link state:sudo dd if=/dev/drm_dp_aux0 bs=1 skip=256 count=16 |xxdWant register descriptions? Page 16in this Intel docis a good start, and so is a document you can find by searching ug_displayport.pdf filetype:pdf.Surely, you can also use the same interface to poke at DPCD and do AUX stuff;this article is just “how to get DisplayPort link values like current and possible link width”.If you think that this is bad advice, contact me somehow and let me know. Cheers!" }, { "title": "KiKit (and other plugins) failing to load on Kicad 8.0.0/8.0.1, Debian/Ubuntu", "url": "/posts/kicad8-ubuntu-kikit/", "categories": "", "tags": "", "date": "2024-04-27 00:00:00 +0300", "snippet": "KiKit (and other plugins) failing to load on Kicad 8.0.0/8.0.1, Debian/Ubuntupcbnew module not found kinda error when you try kikit --help in commandline.the pcbnew.py file is misplaced.,so is its ...", "content": "KiKit (and other plugins) failing to load on Kicad 8.0.0/8.0.1, Debian/Ubuntupcbnew module not found kinda error when you try kikit --help in commandline.the pcbnew.py file is misplaced.,so is its corresponding compiled file.sudo cp /usr/lib/python3.8/site-packages/pcbnew.py /usr/local/lib/python3.8/dist-packages/sudo cp /usr/lib/python3.8/site-packages/_pcbnew.so /usr/local/lib/python3.8/dist-packages/also, you might need to yeet the old pcbnewTransition.py files.rm -vr .local/lib/python3.8/site-packages/pcbnewTransition*now import pcbnew will fail cuz missing pcbnewTransition, but you can dopython3 -m pip install kikitand that will reinstall the deleted file lol.also, cheat: reinstalling kikit from repo is as simple as make install, it appears.TODO: socially acceptable ways to rant about problems with open-source software bs" }, { "title": "FreeCAD AppImage crashing", "url": "/posts/freecad-appimage-crashing/", "categories": "", "tags": "", "date": "2024-03-04 00:00:00 +0200", "snippet": "FreeCAD AppImage crashingAll recent FreeCAD AppImages started suddenly crashing on Ubuntu with this kind of output: FreeCAD 0.21.2, Libs: 0.21.2R33771 (Git) © Juergen Riegel, Werner Mayer, Yo...", "content": "FreeCAD AppImage crashingAll recent FreeCAD AppImages started suddenly crashing on Ubuntu with this kind of output: FreeCAD 0.21.2, Libs: 0.21.2R33771 (Git) © Juergen Riegel, Werner Mayer, Yorik van Havre and others 2001-2023 FreeCAD is free and open-source software licensed under the terms of LGPL2+ license. FreeCAD wouldn't be possible without FreeCAD community. ##### #### ### #### # # # # # # # ## #### #### # # # # # #### # # # # # # # ##### # # # # #### #### # # # # # # # # # # # # # # ## ## ## # # #### #### ### # # #### ## ## ## MESA-LOADER: failed to open iris: /usr/lib/dri/iris_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/x86_64-linux-gnu/dri:\\$${ORIGIN}/dri:/usr/lib/dri, suffix _dri) failed to load driver: iris MESA-LOADER: failed to open iris: /usr/lib/dri/iris_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/x86_64-linux-gnu/dri:\\$${ORIGIN}/dri:/usr/lib/dri, suffix _dri) failed to load driver: iris MESA-LOADER: failed to open swrast: /usr/lib/dri/swrast_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/x86_64-linux-gnu/dri:\\$${ORIGIN}/dri:/usr/lib/dri, suffix _dri) failed to load driver: swrast WebEngineContext used before QtWebEngine::initialize() or OpenGL context creation failed. QGLXContext: Failed to create dummy context Failed to create OpenGL context for format QSurfaceFormat(version 2.0, options QFlags&lt;QSurfaceFormat::FormatOption&gt;(), depthBufferSize 24, redBufferSize -1, greenBufferSize -1, blueBufferSize -1, alphaBufferSize -1, stencilBufferSize 8, samples 0, swapBehavior QSurfaceFormat::DefaultSwapBehavior, swapInterval 1, colorSpace QSurfaceFormat::DefaultColorSpace, profile QSurfaceFormat::NoProfile) /tmp/.mount_FreeCA6LHmxP/AppRun: line 43: 6933 Aborted (core dumped) ${MAIN} \"$@\"This thread gave me a good tip for my 11th gen Intel CPU: LD_PRELOAD=/usr/lib/x86_64-linux-gnu/dri/iris_dri.so ./Your***FreeCAD****.AppImageThere’s also some more info in this thread.If you think that this is bad advice, contact me somehow and let me know. Cheers!" }, { "title": "Solderable standoffs on LCSC", "url": "/posts/LCSC-Solderable-Standoffs/", "categories": "", "tags": "", "date": "2024-01-19 00:00:00 +0200", "snippet": "Solderable standoffs on LCSCWant solderable standoffs from LCSC? They might not be easy to find. However, use the search term SMTSO and you will find a surprising number.In addition, here’s three c...", "content": "Solderable standoffs on LCSCWant solderable standoffs from LCSC? They might not be easy to find. However, use the search term SMTSO and you will find a surprising number.In addition, here’s three categories that I’ve found them appear in:first,second,third.Also lmao look at these threaded inserts that have nodatasheet or parameters listed, and use stock pictures. Me, I’m tempted to buy some just to see what they’re like!Hope this helps. Cheers!As usual, for any notes, contact me somehow and let me know." }, { "title": "MPR121 being funky? Change the baseline!", "url": "/posts/mpr121_funk/", "categories": "", "tags": "", "date": "2024-01-13 00:00:00 +0200", "snippet": "MPR121 being funky? Change the baseline!Are you working with MPR121? Does it at times start being screwy, having one channel get jammed, or another become unresponsive?Congrats, you’ve stumbled ont...", "content": "MPR121 being funky? Change the baseline!Are you working with MPR121? Does it at times start being screwy, having one channel get jammed, or another become unresponsive?Congrats, you’ve stumbled onto this IC being too smart for its own good! Here’s the deal.MPR121 is a wonderful capacitive touch sensing IC. It can do so much for you - all of that automatically, too. One of the things it does, is ongoing baseline calibration. It can adjust to electrode capacity changing over time, so that even if you go into different environment, your touches still get registered. Well, this is the norm for any self-respecting IC, but I digress. Also, this means it can adjust to you hotplugging electrodes! Very cool and all. What if you have a stable electrode configuration (say, all of your bananas and apples are already connected with jumper wires) and it glitches in some way, as it seems to often happen with mine?I’m not as skilled as the engineers who designed this IC. Nevertheless, it looks to me that this baseline adjustment happens way too quickly - which makes sense, but also isn’t always desired. Obviously, it also happens while you’re touching it, not just over longer periods of time accumulated. I’ve been reading baseline values out of registers while touching the pads and looking out for any screwy behaviour, and it seems to me that this is what’s responsible for false positive / negative / inverted (!) keypress registration I’ve been dealing with.What can you do? Well, you can have the IC calibrate for a certain baseline, and then lock that baseline in - disabling baseline tracking. For this, you need to change what values get written into the ECR (0x5E) register - this register controls baseline tracking, aka whether the baseline gets adjusted on an ongoing basis.For the MicroPython library, this is simple - change CL bits, so, write 0b01 into CL bits of the ECR reg.Look at the page 16 of the datasheet to learn more. Here’s how it looks for me:# init as usualmpr = mpr121.MPR121(i2c0, 0x5a)# idk have the baseline establish itself? prolly unnecessary or too longsleep(3)# disabling the IC - stop mode. don't recall why but this is what works for me at the moment, won't test further.mpr._register8(mpr121.MPR121_ELECTRODE_CONFIG, 0b00000000)# idk why this sleep eithersleep(0.1)# enabling the IC with baseline tracking stopped and current baseline locked inmpr._register8(mpr121.MPR121_ELECTRODE_CONFIG, 0b01001111)# idk why this sleep either lmaosleep(0.1)# sketch to read baseline and filtered values and also state:a = [mpr.baseline_data(i) for i in range(0, 12)]b = [mpr.filtered_data(i) for i in range(0, 12)]print(a, b, mpr.touched())# \"while True:\" as needed if you want continuous output for debugging purposesTested, works for me, keeps the buttons functional within half a day’s period. Maybe recalibrate it every now and then by writing the default 0b10 into the register? I don’t, and still my problems got solved with this, hopefully yours will too!This assumes your electrodes are already attached. If you’re fiddling with electrodes, don’t disable baseline tracking, that’s what it’s there for lmao. I got an idea - if you expect to fiddle with electrodes, you can add a button to your project, that will enable baseline tracking while you press it, and disable it once you release it, a “recalibrate” kinda button. Honestly, might just add this to my code.If you’re using a MicroPython library for MPR121, it might just preserve any changes for you.Adafruit libraries need to be hacked for this, though.Oh also if you’re wondering about MPR121 LED driving ability, it’s there, just that you need to check appnoteAN3894 to learn about it.Now onto figuring out why IRQ doesn’t work for me, did I burn out some GPIOs yet again somehow…" }, { "title": "Laptop with missing internal LVDS screen won't output console to external screen properly", "url": "/posts/laptopreuse_lcd_fix/", "categories": "", "tags": "", "date": "2023-09-17 00:00:00 +0300", "snippet": "Laptop with missing internal LVDS screen won’t output console to external screen properlyYou take a laptop motherboard that doesn’t have a screen, then connect it to an external screen. Then, you d...", "content": "Laptop with missing internal LVDS screen won’t output console to external screen properlyYou take a laptop motherboard that doesn’t have a screen, then connect it to an external screen. Then, you decide you’d rather run a framebuffer application - like tmux or irssi. However, the text’s stretched out or just takes a part of the screen. You could even say that, even though the original LCD panel is no longer connected, it still impacts the image on the external monitor in the same way. What gives?Other symptoms: vga= parameter not working anymore screen resolution is limited to the panel’s original resolution it’s probably a limitation that’s either coded into the BIOS or into the built-in graphics processor firmware (through the BIOS) Linux GUI recognizes the externally connected screen and the missing internal screen as a single device so, resolution is limited to 640x480 or 800x600 or 1280x800 or somethingSolutions that don’t work: changing framebuffer drivers might not help you there - I haven’t tried GFXMODE will not help you there neither will vga= , and it’s also outdated X server switches to the right resolution for the external screen Linux framebuffer is not as sophisticated and will not work with the right resolution, thoughHere’s how it might look:~{}(/assets/img/230917_laptopscrfix/0.jpg)Other possibility is that your console will be scaled way up compared to the acttual resolution of your external screen.Here’s an explanation: your laptop expects a screen that’s not there but the firmware pretends it’s there. Framebuffer console uses the lowest possible resolution out of all available screens, so it ends up being limited to the hardcoded resolution of the internal screen.The fix is to disable the built-in panel interface using a kernel parameter:video=LVDS-1:dAdd this to your GRUB_CMDLINE_LINUX= and regenerate grub config, or append it to kernel params while booting in the grub menu, boot with it, voila.Tested on: some Toshiba Satellite motherboard with missing screen EEE PC 701 motherboard DN2800MT motherboard (built-in graphics prevent the external screens from even initializing if you don’t blacklist the LVDS panel)eDP screens don’t tend to suffer from this because the AUX connection is required for the panel to function, and it can also provide autodetection. The EDID mechanism is optional for LVDS panels, however, so laptop manufacturers often hardcode the panel resolution." }, { "title": "ENOMEM when using urequests on MicroPython", "url": "/posts/uPy_HTTPS_ENOMEM/", "categories": "", "tags": "", "date": "2023-07-17 00:00:00 +0300", "snippet": "ENOMEM when using urequests on MicroPythonIf you’re making https requests with the MicroPython requests module, you might encounter ENOMEM errors. For me, they appeared after every 2nd request to a...", "content": "ENOMEM when using urequests on MicroPythonIf you’re making https requests with the MicroPython requests module, you might encounter ENOMEM errors. For me, they appeared after every 2nd request to a different HTTPS endpoint - first endpoint request would always succeed. Weird stuff. Anyway, go get your own copy of the requests library from the MicroPython repo, and find where the requests function is returninga Request object. Library download link hereYou’ll notice that, before it, there are a bunch of error cases, and the socket is closed in case of those. In case of a successful HTTP response, however, the socket is not closed.Close it. resp = Response(s) resp.status_code = status resp.reason = reason if resp_d is not None: resp.headers = resp_d + s.close() return respI have no idea what the side effects are - my device is a throwie, it will reset itself if the code fails. I do know that this made the ENOMEM error disappear.After modifying this, upload this onto your device, and make sure that it is called instead of the builtin - I named my lib urequests.py and did import urequests. gl.If you think that this is bad advice, contact me somehow and let me know. Cheers!" }, { "title": "ASM118x chip notes", "url": "/posts/ASM118x/", "categories": "", "tags": "", "date": "2023-04-09 00:00:00 +0300", "snippet": "ASM1182/ASM1184/ASM1187 chip notesThese are cool cheapish PCIe switches, 1 to 2/4/7 links accordingly. They’re used in many places, from mining equipment to desktop motherboards.I describe them a b...", "content": "ASM1182/ASM1184/ASM1187 chip notesThese are cool cheapish PCIe switches, 1 to 2/4/7 links accordingly. They’re used in many places, from mining equipment to desktop motherboards.I describe them a bit in a Hackaday article.There is not much documentation on them - I wanna aggregate whatever is available, on a single page.They all seem to need a 1.2V source. No idea how much current tho.KiCad package for the ASM1184 is Package_DFN_QFN:QFN-64-1EP_9x9mm_P0.5mm_EP5.2x5.2mm.None of them have datasheets that I’ve seen - things like the I2C registers remain a mystery. Got one? Please let me know!Info about ASM1182: This laptop schematic PDF. It also has some info on strap pins!Info about ASM1184: This schematic PDF This blog post - the associated GitHub repo also has KiCad files!! Also, from the aforementioned blog post - apparently, there’s an EasyEDA symbol for this chip?Info about ASM1187: A desktop motherboard boardviewAll of them, you can find on Aliexpress.What we could use: Datasheets I2C register mapsGot more info? Contact me through one of the ways you can find.Pic credit to [AMD Outside]." }, { "title": "VL170 chip notes", "url": "/posts/VL170/", "categories": "", "tags": "", "date": "2022-11-22 00:00:00 +0200", "snippet": "VL170 chip notesupdate: this chip is a clone of HD3SS460, so if you need an actual datasheet, you might want to consult that one -there’s way more to this IC, it would seem, including a ton of swit...", "content": "VL170 chip notesupdate: this chip is a clone of HD3SS460, so if you need an actual datasheet, you might want to consult that one -there’s way more to this IC, it would seem, including a ton of switching modes? even setting two of the control pinsinto mid-level between GND and VCC to work? o_oalso, if you need a symbol and an example board, see here somewhereIt can be hard to find USB-C chips doing specifically what you need to do. I’d like to bring news about the chip called VL170,that lets you do a USB-C host or device port with DP and USB3 highspeed lanes easily. Specifically, it lets you do either USB3 + DisplayPort 2-lane,or DisplayPort 4-lane, switching the high-speed lanes between USB-C port lanes in whichever way you want.On the device side, if you’re implementing a fixed USB3 + DP arrangement, you typically don’t need this; that said, it might still behandy if for some reason, you’d like to be able to do both 4-lane and 2-lane+USB3 on your device’s TypeC port.There’s no CC handling on this chip. That’s great for me cuz I’ll be doing that externally. It takes three GPIOs from an MCU,EN, POL (polarity? USB-C port HS signal flipping?) and AMSEL. AMSEL seems to switch between “two-lane DP+USB3” and “four-lane DP”?You can buy these on Aliexpress, and mebbe Taobao. Not on LCSC. Weh!First page is the VIA page, which tells us the device is EOL. Whatever.Then, there’s the “VIA IC” page, whatever that site is.There’s no datasheet as far as I’ve looked. However! There’s this page, and it gave me some PNGs! Here they are:This page also gave me some product brief comparisons.Looks like the VL171 is the same chip but lower insertion loss. Is nice!Want a simple DP-only reference design? Here you go!The chip actually seems to do bidirectional translation of DP and USB3, which is a joy!Do you need to cross USB3 signals over, aka, is this device-side or host-side TX and RX naming? No idea! Do look into that, mebbe can tell from VIA’s reference board screenshots!" } ]
